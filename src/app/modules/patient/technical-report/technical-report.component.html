<div class="min-h-screen bg-slate-50">
  
  <!-- Loading State -->
  <div *ngIf="loading" class="flex items-center justify-center min-h-screen">
    <div class="text-center">
      <div class="w-8 h-8 border-2 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto mb-4"></div>
      <p class="text-slate-600 text-sm">Generando reporte técnico...</p>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="!loading && error" class="flex items-center justify-center min-h-screen">
    <div class="text-center max-w-md mx-auto px-6">
      <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
      </div>
      <h3 class="text-slate-800 font-medium mb-2">Error al cargar el reporte</h3>
      <p class="text-slate-600 text-sm mb-4">{{ error }}</p>
      <button 
        (click)="retryLoadReport()"
        class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
        </svg>
        Intentar de nuevo
      </button>
    </div>
  </div>

  <!-- No Data Available State -->
  <div *ngIf="!loading && noDataAvailable && !error" class="max-w-4xl mx-auto p-6">
    <div class="bg-white rounded-lg border border-slate-200 p-12 text-center">
      <div class="w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-12 h-12 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
        </svg>
      </div>
      
      <h3 class="text-xl font-semibold text-slate-900 mb-4">
        Reporte Técnico no disponible
      </h3>
      
      <p class="text-slate-600 mb-6 max-w-md mx-auto leading-relaxed">
        Actualmente no tienes estudios de laboratorio o citas médicas suficientes para generar un reporte técnico detallado. 
        Necesitamos más información clínica para crear un análisis completo.
      </p>
      
      <div class="space-y-4">
        <div class="bg-purple-50 border border-purple-200 rounded-lg p-4 mb-6">
          <h4 class="font-medium text-purple-900 mb-2">Para generar tu reporte técnico necesitas:</h4>
          <ul class="text-purple-800 text-sm space-y-1 text-left max-w-xs mx-auto">
            <li>• Al menos 3 citas médicas completadas</li>
            <li>• Estudios de laboratorio procesados</li>
            <li>• Muestras analizadas (sangre, ADN, etc.)</li>
            <li>• Diagnósticos médicos registrados</li>
          </ul>
        </div>
        
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button 
            (click)="scheduleAppointment()"
            class="inline-flex items-center px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
            </svg>
            Agendar Cita Médica
          </button>
          
          <button 
            (click)="retryLoadReport()"
            class="inline-flex items-center px-6 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-medium rounded-lg transition-colors">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>
            Intentar de nuevo
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content - Solo se muestra si hay reporte válido -->
  <div *ngIf="!loading && !error && !noDataAvailable && report" class="max-w-6xl mx-auto p-6 space-y-6">
    
    <!-- Header -->
    <header class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-start justify-between mb-6">
        <div>
          <h1 class="text-2xl font-semibold text-slate-900 mb-2">Reporte Médico Técnico</h1>
          <p class="text-slate-600">Análisis clínico integral y correlaciones médicas</p>
        </div>
        <div class="flex space-x-3">
          <button class="inline-flex items-center px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-colors text-sm font-medium">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"/>
            </svg>
            Imprimir
          </button>
          <button class="inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
            Descargar PDF
          </button>
        </div>
      </div>
      
      <!-- Patient Info -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-6 border-t border-slate-100">
        <div>
          <span class="text-sm text-slate-500 font-medium">Paciente</span>
          <p class="text-slate-900 font-semibold">{{ report.paciente.nombre }}</p>
        </div>
        <div>
          <span class="text-sm text-slate-500 font-medium">Fecha de Nacimiento</span>
          <p class="text-slate-900">{{ report.paciente.fechaNacimiento | date:'longDate' }}</p>
        </div>
        <div>
          <span class="text-sm text-slate-500 font-medium">CURP</span>
          <p class="text-slate-900 font-mono text-sm">{{ report.paciente.curp }}</p>
        </div>
      </div>
    </header>

    <!-- Executive Summary -->
    <section class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
          <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-900">Resumen Ejecutivo</h2>
      </div>
      
      <!-- Clinical Summary Text -->
      <div class="mb-6 p-4 bg-slate-50 rounded-lg border">
        <h3 class="font-medium text-slate-800 mb-3">Análisis Clínico</h3>
        <p class="text-slate-700 leading-relaxed">{{ report.resumen.texto }}</p>
      </div>

      <!-- Detected Diseases -->
      <div class="mb-6">
        <h3 class="font-medium text-slate-800 mb-4">Condiciones Detectadas</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div *ngFor="let enfermedad of report.resumen.enfermedadesDetectadas" 
               class="flex items-center p-3 bg-amber-50 border border-amber-200 rounded-lg">
            <div class="w-2 h-2 bg-amber-500 rounded-full mr-3"></div>
            <span class="text-amber-800 font-medium">{{ enfermedad }}</span>
          </div>
        </div>
      </div>

      <!-- Evidence Supporting -->
      <div>
        <h3 class="font-medium text-slate-800 mb-4">Evidencia que Respalda el Diagnóstico</h3>
        <div class="space-y-4">
          <div *ngFor="let evidencia of report.resumen.evidenciaRespalda" 
               class="border border-slate-200 rounded-lg p-4">
            <div class="flex items-start justify-between mb-3">
              <h4 class="font-medium text-slate-800">{{ evidencia.enfermedad }}</h4>
              <button 
                *ngIf="isValidSampleId(evidencia.idMuestraRespaldo)"
                (click)="openSampleDetail(evidencia.idMuestraRespaldo)"
                class="text-xs text-blue-600 hover:text-blue-800 font-mono bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded border border-blue-200 transition-colors flex items-center">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                </svg>
                Ver estudio: {{ getShortSampleId(evidencia.idMuestraRespaldo) }}
              </button>
              <span 
                *ngIf="!isValidSampleId(evidencia.idMuestraRespaldo)"
                class="text-xs text-slate-500 font-mono bg-slate-100 px-2 py-1 rounded">
                ID: {{ getShortSampleId(evidencia.idMuestraRespaldo) }}
              </span>
            </div>
            <p class="text-slate-600 text-sm">{{ evidencia.hallazgoEspecifico }}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Medical History -->
    <section class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center mr-3">
          <svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-900">Historial Médico</h2>
      </div>
      
      <div class="space-y-4">
        <div *ngFor="let visita of getFilteredVisits()" 
             class="border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-blue-600">{{ visita.fechaVisita | date:'short' }}</span>
            <span *ngIf="visita.diagnostico" class="inline-flex px-2 py-1 bg-emerald-100 text-emerald-800 text-xs font-medium rounded-full">
              Diagnóstico Registrado
            </span>
          </div>
          
          <div class="space-y-3">
            <div *ngIf="visita.diagnostico">
              <h4 class="font-medium text-slate-800">Diagnóstico</h4>
              <p class="text-slate-700">{{ visita.diagnostico }}</p>
            </div>
            
            <div *ngIf="visita.recomendaciones && visita.recomendaciones.length > 0">
              <h4 class="font-medium text-slate-800">Recomendaciones</h4>
              <ul class="list-disc list-inside space-y-1 text-slate-700">
                <li *ngFor="let recomendacion of visita.recomendaciones">{{ recomendacion }}</li>
              </ul>
            </div>
            
            <div *ngIf="visita.notas">
              <h4 class="font-medium text-slate-800">Notas Clínicas</h4>
              <p class="text-slate-700">{{ visita.notas }}</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Laboratory Studies -->
    <section class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3">
          <!-- Cambiado icono de micrófono por icono de laboratorio/tubo de ensayo -->
          <svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M7,2V4H8V18A4,4 0 0,0 12,22A4,4 0 0,0 16,18V4H17V2H7M9,4H15V18A2,2 0 0,1 13,20A2,2 0 0,1 11,18V4Z"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-900">Estudios de Laboratorio Recientes</h2>
      </div>
      
      <div class="space-y-6">
        <div *ngFor="let estudio of report.reportesEstudiosRecientes" 
             class="border border-slate-200 rounded-lg p-4 hover:bg-slate-50 transition-colors">
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div>
              <span class="text-sm text-slate-500 font-medium">Fecha</span>
              <p class="text-slate-900">{{ estudio.fechaEstudio | date:'shortDate' }}</p>
            </div>
            <div>
              <span class="text-sm text-slate-500 font-medium">Tipo de Muestra</span>
              <p class="text-slate-900">{{ getSampleTypeLabel(estudio.tipoMuestra) }}</p>
            </div>
            <div>
              <span class="text-sm text-slate-500 font-medium">Analizador</span>
              <p class="text-slate-900">{{ estudio.modeloAnalizador }}</p>
            </div>
            <div class="flex items-center justify-between">
              <div>
                <span class="text-sm text-slate-500 font-medium">ID Muestra</span>
                <p class="text-slate-900 font-mono text-xs">{{ getShortSampleId(estudio.idMuestra) }}</p>
              </div>
              <button 
                *ngIf="isValidSampleId(estudio.idMuestra)"
                (click)="openSampleDetail(estudio.idMuestra)"
                class="inline-flex items-center px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 text-xs font-medium rounded-lg border border-purple-200 transition-colors">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                Ver detalles
              </button>
            </div>
          </div>
          
          <div class="pt-4 border-t border-slate-100">
            <h4 class="font-medium text-slate-800 mb-2">Hallazgos Principales</h4>
            <p class="text-slate-700 leading-relaxed">{{ estudio.hallazgosPrincipales }}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Clinical Correlations -->
    <section class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3">
          <svg class="w-5 h-5 text-indigo-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-900">Correlaciones Clínicas</h2>
      </div>
      
      <!-- Progression Analysis -->
      <div class="mb-6 p-4 bg-indigo-50 rounded-lg border border-indigo-200">
        <h3 class="font-medium text-indigo-900 mb-2">Análisis de Progresión</h3>
        <p class="text-indigo-800 leading-relaxed">{{ report.correlacionesClinitas.analisisProgresion }}</p>
      </div>

      <!-- Identified Patterns -->
      <div class="mb-6">
        <h3 class="font-medium text-slate-800 mb-4">Patrones Identificados</h3>
        <div class="space-y-4">
          <div *ngFor="let patron of report.correlacionesClinitas.patronesIdentificados" 
               class="border border-slate-200 rounded-lg p-4">
            <h4 class="font-medium text-slate-800 mb-3">{{ patron.patron }}</h4>
            
            <div class="mb-4">
              <span class="text-sm text-slate-500 font-medium">Fechas Relevantes:</span>
              <div class="flex flex-wrap gap-2 mt-1">
                <span *ngFor="let fecha of patron.fechasRelevantes" 
                      class="inline-flex px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded">
                  {{ fecha | date:'shortDate' }}
                </span>
              </div>
            </div>
            
            <div>
              <span class="text-sm text-slate-500 font-medium">Evidencia:</span>
              <div class="mt-2 space-y-2">
                <div *ngFor="let evidencia of patron.evidenciaRespaldo" 
                     class="text-sm p-3 bg-slate-50 rounded border-l-4 border-blue-400">
                  <div class="flex items-center justify-between mb-1">
                    <div class="font-medium text-slate-700">
                      Muestra: {{ getShortSampleId(evidencia.idMuestra) }}
                    </div>
                    <button 
                      *ngIf="isValidSampleId(evidencia.idMuestra)"
                      (click)="openSampleDetail(evidencia.idMuestra)"
                      class="text-xs text-blue-600 hover:text-blue-800 underline">
                      Ver estudio
                    </button>
                  </div>
                  <div class="text-slate-600">{{ evidencia.hallazgo }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Unexplained Findings -->
      <div *ngIf="report.correlacionesClinitas.hallazgosNoExplicados.length > 0">
        <h3 class="font-medium text-slate-800 mb-4">Hallazgos Sin Explicar</h3>
        <div class="space-y-4">
          <div *ngFor="let hallazgo of report.correlacionesClinitas.hallazgosNoExplicados" 
               class="p-4 bg-amber-50 border border-amber-200 rounded-lg">
            <h4 class="font-medium text-amber-900 mb-2">{{ hallazgo.hallazgo }}</h4>
            <div class="flex items-center justify-between text-sm text-amber-800 mb-2">
              <div>
                <span class="font-medium">Muestra relacionada:</span> {{ getShortSampleId(hallazgo.idMuestra) }}
              </div>
              <button 
                *ngIf="isValidSampleId(hallazgo.idMuestra)"
                (click)="openSampleDetail(hallazgo.idMuestra)"
                class="text-amber-700 hover:text-amber-900 underline text-xs">
                Ver estudio
              </button>
            </div>
            <div class="text-sm text-amber-800">
              <span class="font-medium">Recomendación:</span> {{ hallazgo.recomendacionInvestigacion }}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Recommendations -->
    <section class="bg-white rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3">
          <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-900">Recomendaciones Médicas</h2>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div *ngFor="let recomendacion of report.recomendaciones; let i = index" 
             class="flex items-start p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors">
          <div class="w-6 h-6 bg-green-100 text-green-600 rounded-full flex items-center justify-center flex-shrink-0 mr-3 text-sm font-medium">
            {{ i + 1 }}
          </div>
          <p class="text-slate-700">{{ recomendacion }}</p>
        </div>
      </div>
    </section>

    <!-- Evidence Traceability -->
    <section class="bg-slate-100 rounded-lg border border-slate-200 p-6">
      <div class="flex items-center mb-6">
        <div class="w-10 h-10 bg-slate-200 rounded-lg flex items-center justify-center mr-3">
          <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"/>
          </svg>
        </div>
        <h2 class="text-xl font-semibold text-slate-800">Trazabilidad de Evidencia</h2>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <h3 class="font-medium text-slate-700 mb-3">Muestras Analizadas</h3>
          <div class="space-y-2">
            <div *ngFor="let muestra of report.trazabilidadEvidencia.muestrasAnalizadas" 
                 class="flex items-center justify-between text-xs bg-white p-2 rounded border">
              <span class="font-mono">{{ muestra }}</span>
              <button 
                *ngIf="isValidSampleId(muestra)"
                (click)="openSampleDetail(muestra)"
                class="text-blue-600 hover:text-blue-800 underline ml-2">
                Ver
              </button>
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-medium text-slate-700 mb-3">Visitas Médicas Referenciadas</h3>
          <div class="space-y-2">
            <div *ngFor="let visita of report.trazabilidadEvidencia.visitasMedicasReferenciadas" 
                 class="text-xs bg-white p-2 rounded border">
              {{ visita | date:'short' }}
            </div>
          </div>
        </div>
        
        <div>
          <h3 class="font-medium text-slate-700 mb-3">Nivel de Confianza</h3>
          <div class="inline-flex px-3 py-2 rounded-full border font-medium text-sm"
               [ngClass]="getConfidenceLevelStyle(report.trazabilidadEvidencia.nivelConfianzaResumen)">
            {{ report.trazabilidadEvidencia.nivelConfianzaResumen }}
          </div>
        </div>
      </div>
    </section>

  </div>

  <!-- Sample Detail Modal - CORREGIDO -->
  <div *ngIf="showSampleModal" class="fixed inset-0 z-[9999] flex items-center justify-center">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black bg-opacity-50 transition-opacity"
         (click)="closeModals()"></div>
    
    <!-- Modal Container -->
    <div class="relative z-[10000] w-full max-w-4xl mx-4 my-8 max-h-[90vh] overflow-hidden">
      <app-sample-detail-modal
        [visible]="showSampleModal"
        [sample]="selectedSample"
        (close)="closeModals()">
      </app-sample-detail-modal>
    </div>
  </div>
</div>